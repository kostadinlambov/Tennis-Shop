
<div class="container mx-auto ">
  <h1 class="mt-3 mb-3 text-center font-weight-bold display-5">Register</h1>
  <hr class="my-2 mb-3 col-md-6">

  <div class="mx-auto ">
     
    <form  #registerForm="ngForm" (ngSubmit)="register()">
      <div class="row space-top mx-auto ">
        <div class="col-md-6">
          <div class="form-group">
              <label for="username">Username</label>
              <input 
                type="text" 
                class="form-control" 
                id="username"
                name="username"
                [(ngModel)]="user.username"
                #usernameField="ngModel"
                minlength = "4"
                maxlength="16"
                appUsernameValidator="usernameField"
                ngModel 
                required 
              >
              <div class="alert alert-danger" *ngIf="usernameField.invalid && (usernameField.dirty || usernameField.touched)">
                <div *ngIf="usernameField.errors.invalidUsername">Username must contain only letters and digits!</div>
                <div *ngIf="usernameField.errors.minlength">Username should be at least 4 and maximum 16 characters long.</div>
                <div *ngIf="usernameField.errors.maxlength">Username should be maximum 16 characters long.</div>
                <div *ngIf="usernameField.errors.required">Username is required!</div>
              </div>
            </div>
            
              <div class="form-group">
              <label for="firstName">First Name</label>
              <input 
                  type="text" 
                  class="form-control" 
                  id="firstName"
                  name="firstName" 
                  [(ngModel)]="user.firstName"
                  #firstNameField="ngModel"
                  appNamesValidator
                  ngModel
                  required
              >
              <div class="alert alert-danger" *ngIf="firstNameField.invalid && (firstNameField.dirty || firstNameField.touched)">
                <div *ngIf="firstNameField.errors.invalidName">First Name must start with a capital letter and must contain only letters.</div>
                <div *ngIf="firstNameField.errors.required">First Name is required.</div>
              </div>
            </div>

            <div class="form-group">
                <label for="address">Address</label>
                <input 
                    type="text" 
                    class="form-control" 
                    id="address"
                    name="address" 
                    [(ngModel)]="user.address"
                    #addressField="ngModel"
                    ngModel
                    required
                >
                <!-- <div class="alert alert-danger" [hidden]="emailField.valid || emailField.pristine ">E-mail is required!</div> -->
  
                <div class="alert alert-danger" *ngIf="addressField.invalid && (addressField.dirty || addressField.touched)">
                  <div *ngIf="addressField.errors.required">Address is required.</div>
                </div>
              </div>

          <!-- <div ngModelGroup="passwordGroup" > -->
          <div class="form-group">
              <label for="password">Password</label>
              <input 
                type="password" 
                class="form-control" 
                id="password"
                name="password"
                [(ngModel)]="user.password"
                #passwordField="ngModel"
                appPasswordValidator = "passwordField"
                (input)="confirmPasswordField.control.updateValueAndValidity()"
                minlength="4"
                maxlength="16"
                ngModel 
                required
              >
              <div 
                class="alert alert-danger" *ngIf="passwordField.invalid && (passwordField.dirty || passwordField.touched)">
                <div *ngIf="passwordField.errors.invalidPassword">Password must contain only letters and digits.</div>
                <div *ngIf="passwordField.errors.required">Password is required</div>
                <div *ngIf="passwordField.errors.minlength">Password should be at least 4 and maximum 16 characters long.</div>
                <div *ngIf="passwordField.errors.maxlength">Password should be maximum 16 characters long.</div>
              </div>
            </div>

          </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="email">Email Address</label>
                <input 
                  type="email" 
                  class="form-control" 
                  id="email"
                  name="email" 
                  [(ngModel)]="user.email"
                  #emailField="ngModel"
                  pattern='^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$'
                  ngMode
                  required
                  (click)= "inputClick(emailField)"
                >
                <div 
                  class="alert alert-danger" *ngIf="emailField.invalid && (emailField.dirty || emailField.touched)">
                    <div *ngIf="emailField.errors.pattern">Invalid e-mail address!</div>
                    <div *ngIf="emailField.errors.required">E-mail is required.</div>
                </div>
              </div>
           
           
            <div class="form-group">
                <label for="lastName">Last Name</label>
                <input 
                    type="text" 
                    class="form-control" 
                    id="lastName"
                    name="lastName" 
                    [(ngModel)]="user.lastName"
                    #lastNameField="ngModel"
                    appNamesValidator
                    ngModel
                    required
                >
                <div class="alert alert-danger" *ngIf="lastNameField.invalid && (lastNameField.dirty || lastNameField.touched)">
                  <div *ngIf="lastNameField.errors.invalidName">Last Name must start with a capital letter and must contain only letters.</div>
                  <div *ngIf="lastNameField.errors.required">Last Name is required.</div>
                </div>
              </div>

              <div class="form-group">
                  <label for="city">City</label>
                  <input 
                      type="text" 
                      class="form-control" 
                      id="city"
                      name="city" 
                      [(ngModel)]="user.city"
                      #cityField="ngModel"
                      ngModel
                      required
                  >
                  <!-- <div class="alert alert-danger" [hidden]="emailField.valid || emailField.pristine ">E-mail is required!</div> -->
    
                  <div class="alert alert-danger" *ngIf="cityField.invalid && (cityField.dirty || cityField.touched)">
                    <div *ngIf="cityField.errors.required">City is required.</div>
                  </div>
                </div>
            
              <div class="form-group" >
                <label for="confirmPassword">Confirm Password</label>
                <input 
                  type="password" 
                  class="form-control" 
                  id="confirmPassword"
                  name="confirmPassword" 
                  [(ngModel)]="user.confirmPassword"
                  #confirmPasswordField="ngModel"
                  appMatchPasswordValidator="password"
                  ngModel
                  required
                >
                <!-- <div class="alert alert-danger" [hidden]="password.value === confirmPassword.value"> Passwords do not match.</div> -->
                <div 
                  class="alert alert-danger" *ngIf=" (confirmPasswordField.dirty || confirmPasswordField.touched) 
                  && confirmPasswordField.invalid">
                    <!-- <div *ngIf="passwordField.errors.notEqual">Passwords do not match.</div> -->
                    Passwords do not match.
                </div>
                </div>
              </div>
              <!-- </div> -->


          <button 
            type="submit" 
            class="btn btn-success mx-auto"
            [disabled]="!registerForm.form.valid">
            Register
          </button>
         </div>  
        </form>
  </div>  
</div> 


